{"version":3,"sources":["../src/AnimationManager.ts","../src/adapters/swup.ts","../src/adapters/barba.ts","../src/adapters/astro.ts"],"sourcesContent":["import { gsap } from 'gsap';\nimport { ScrollTrigger } from 'gsap/ScrollTrigger';\n\ngsap.registerPlugin(ScrollTrigger);\n\n/**\n * Adapter interface per integrare SPA routers (Swup, Barba.js, etc.)\n */\nexport interface SPAAdapter {\n\t/** Nome identificativo dell'adapter */\n\tname: string;\n\t/** Hook chiamato prima della sostituzione del contenuto */\n\tonBeforeSwap(callback: () => void): void;\n\t/** Hook chiamato dopo la sostituzione del contenuto */\n\tonAfterSwap(callback: () => void): void;\n\t/** Rimuove gli hook e pulisce le risorse (opzionale) */\n\tdestroy?(): void;\n}\n\n/**\n * Opzioni di configurazione per AnimationManager\n */\nexport interface AnimationManagerOptions {\n\t/** Abilita logging di debug */\n\tdebug?: boolean;\n\t/** Adapter SPA opzionale (Swup, Barba.js, etc.) */\n\tadapter?: SPAAdapter;\n}\n\n/**\n * Opzioni per registrazione animazioni\n */\nexport interface AnimationOptions {\n\t/** Se true, l'animazione sopravvive ai cleanup non forzati */\n\tpersist?: boolean;\n}\n\n/**\n * Opzioni per setup con context\n */\nexport interface SetupOptions extends AnimationOptions {\n\t/** Elemento o selettore per scoping dei selettori GSAP */\n\tscope?: Element | string;\n}\n\n/**\n * Animation Manager - Singleton per gestire le animazioni GSAP in applicazioni SPA\n *\n * Caratteristiche:\n * - Gestione centralizzata di Tween/Timeline e ScrollTrigger, indicizzati per chiave\n * - Setup con gsap.context() e scope opzionale (via `setup(key, fn, { scope })`)\n * - Persistenza opzionale per animazioni, ScrollTrigger e setup (sopravvivono ai page swap)\n * - Cleanup automatico su navigazioni SPA (configurabile via adapter) e API esplicite\n * - Refresh controllato degli ScrollTrigger via `refresh()`\n * - Debug logging configurabile\n * - Agnostico rispetto al framework SPA (supporta Swup, Barba.js, custom routers)\n *\n * Linee guida d'uso:\n * - Chiamare `init({ adapter })` per collegare gli hook del ciclo di vita SPA\n * - Usa `setup()` per blocchi che includono pi√π animazioni e side-effects\n * - Usa `animate()` per singole Timeline/Tween e `timeline()` come factory comoda\n * - Registra sempre gli ScrollTrigger con `scroll()` o `registerScrollTriggers()`\n */\nclass AnimationManager {\n\tprivate static instance: AnimationManager;\n\tprivate adapter: SPAAdapter | null = null;\n\n\t/** Track delle animazioni attive (array di animazioni) */\n\tprivate activeAnimations: Map<string, (gsap.core.Timeline | gsap.core.Tween)[]> = new Map();\n\t/** Track degli ScrollTriggers attivi */\n\tprivate scrollTriggers: Map<string, ScrollTrigger[]> = new Map();\n\t/** Track delle animazioni persistenti */\n\tprivate persistentAnimations: Set<string> = new Set();\n\t/** Track degli ScrollTriggers persistenti */\n\tprivate persistentScrollTriggers: Set<string> = new Set();\n\t/** Contesti gsap.context() per setup() multi-animazione */\n\tprivate contexts: Map<string, gsap.Context> = new Map();\n\n\t/** Flag di debug */\n\tpublic isDebug = false;\n\n\tprivate constructor() {}\n\n\tstatic getInstance(): AnimationManager {\n\t\tif (!AnimationManager.instance) {\n\t\t\tAnimationManager.instance = new AnimationManager();\n\t\t}\n\t\treturn AnimationManager.instance;\n\t}\n\n\t/**\n\t * Inizializza AnimationManager con opzioni\n\t *\n\t * @param options - Opzioni di configurazione\n\t */\n\tinit(options: AnimationManagerOptions = {}): void {\n\t\tconst { debug = false, adapter } = options;\n\n\t\tthis.isDebug = debug;\n\n\t\tif (adapter) {\n\t\t\tif (this.adapter) {\n\t\t\t\tthis.log('‚ö†Ô∏è AnimationManager already has an adapter');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.adapter = adapter;\n\t\t\tthis.setupAdapterHooks();\n\t\t\tthis.log(`‚úÖ AnimationManager initialized with adapter: ${adapter.name}`);\n\t\t} else {\n\t\t\tthis.log('‚úÖ AnimationManager initialized (standalone mode)');\n\t\t}\n\t}\n\n\t/**\n\t * Disconnette l'adapter corrente e pulisce tutte le animazioni.\n\t * Utile per cambiare adapter o per cleanup completo.\n\t */\n\tdestroy(): void {\n\t\t// Chiama destroy dell'adapter se disponibile\n\t\tif (this.adapter?.destroy) {\n\t\t\tthis.adapter.destroy();\n\t\t}\n\t\tthis.adapter = null;\n\n\t\t// Forza cleanup di tutto\n\t\tthis.forceCleanupAll();\n\n\t\tthis.log('üí• AnimationManager destroyed');\n\t}\n\n\t/**\n\t * Setup degli hook dell'adapter SPA\n\t */\n\tprivate setupAdapterHooks(): void {\n\t\tif (!this.adapter) return;\n\n\t\tthis.adapter.onBeforeSwap(() => {\n\t\t\t// Quick check: se non abbiamo nulla da pulire, salta il cleanup\n\t\t\tconst hasNonPersistentAnimations = Array.from(this.activeAnimations.keys()).some(\n\t\t\t\t(key) => !this.persistentAnimations.has(key)\n\t\t\t);\n\t\t\tconst hasNonPersistentScrollTriggers = Array.from(this.scrollTriggers.keys()).some(\n\t\t\t\t(key) => !this.persistentScrollTriggers.has(key)\n\t\t\t);\n\t\t\tconst hasNonPersistentContexts = Array.from(this.contexts.keys()).some(\n\t\t\t\t(key) => !this.persistentAnimations.has(key)\n\t\t\t);\n\n\t\t\tif (\n\t\t\t\t!hasNonPersistentAnimations &&\n\t\t\t\t!hasNonPersistentScrollTriggers &&\n\t\t\t\t!hasNonPersistentContexts\n\t\t\t) {\n\t\t\t\tif (this.isDebug) {\n\t\t\t\t\tthis.log('‚ö° No cleanup needed - only persistent animations active');\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isDebug) {\n\t\t\t\tthis.log('üßπ Cleaning up animations before page swap');\n\t\t\t}\n\t\t\tthis.cleanupAll();\n\t\t});\n\n\t\tthis.adapter.onAfterSwap(() => {\n\t\t\tthis.log('üîÑ Page swapped, ready for new animations');\n\t\t\tScrollTrigger.refresh();\n\t\t});\n\t}\n\n\t/**\n\t * Registra una nuova animazione GSAP creata esternamente (Tween o Timeline).\n\t */\n\tregister(\n\t\tkey: string,\n\t\tanimation: gsap.core.Timeline | gsap.core.Tween | (gsap.core.Timeline | gsap.core.Tween)[],\n\t\toptions?: AnimationOptions\n\t): void {\n\t\tif (!this.activeAnimations.has(key) && !this.contexts.has(key)) {\n\t\t\tconst animations = Array.isArray(animation) ? animation : [animation];\n\t\t\tthis.activeAnimations.set(key, animations);\n\n\t\t\tif (options?.persist) {\n\t\t\t\tthis.persistentAnimations.add(key);\n\t\t\t\tthis.log(\n\t\t\t\t\t`‚úÖ Registered PERSISTENT animation: ${key} (${animations.length} tween/timeline)`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.log(`‚úÖ Registered new animation: ${key} (${animations.length} tween/timeline)`);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.log(`‚ôªÔ∏è Reusing animation: ${key}`);\n\t\t}\n\t}\n\n\t/**\n\t * Registra ScrollTrigger per una specifica chiave\n\t */\n\tregisterScrollTriggers(\n\t\tkey: string,\n\t\ttriggers: ScrollTrigger[],\n\t\toptions?: AnimationOptions\n\t): void {\n\t\tif (!this.scrollTriggers.has(key)) {\n\t\t\tthis.scrollTriggers.set(key, triggers);\n\n\t\t\tif (options?.persist) {\n\t\t\t\tthis.persistentScrollTriggers.add(key);\n\t\t\t\tthis.log(`üìç Registered PERSISTENT ScrollTriggers for: ${key}`);\n\t\t\t} else {\n\t\t\t\tthis.log(`üìç Registered ScrollTriggers for: ${key}`);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Crea e registra una singola animazione GSAP (Tween o Timeline).\n\t *\n\t * @template T Tipo di animazione (Timeline o Tween)\n\t * @param key Chiave univoca\n\t * @param animationFactory Factory che ritorna la Timeline/Tween o array di animazioni\n\t * @param options.persist Se true, l'animazione √® preservata ai cleanup non forzati\n\t */\n\tanimate<T extends gsap.core.Timeline | gsap.core.Tween>(\n\t\tkey: string,\n\t\tanimationFactory: T | T[],\n\t\toptions?: AnimationOptions\n\t): T {\n\t\tthis.register(key, animationFactory, options);\n\t\tconst animation = Array.isArray(animationFactory) ? animationFactory[0] : animationFactory;\n\t\treturn animation;\n\t}\n\n\t/**\n\t * Esegue e registra un blocco di setup con `gsap.context()` per orchestrare animazioni e side-effects.\n\t *\n\t * @param key Chiave univoca del setup\n\t * @param setupFunction Funzione eseguita nel context (riceve `ctx`)\n\t * @param options.persist Se true, il setup √® persistente\n\t * @param options.scope Elemento o selettore per scoping dei selettori GSAP\n\t *\n\t * @example\n\t * AM.setup('globalEffects', (ctx) => {\n\t *   gsap.to('.el', { opacity: 1 })\n\t *   ctx?.add(() => {\n\t *     window.addEventListener('scroll', onScroll)\n\t *     return () => window.removeEventListener('scroll', onScroll)\n\t *   })\n\t * }, { persist: true, scope: document.body })\n\t */\n\tsetup(\n\t\tkey: string,\n\t\tsetupFunction: (ctx?: gsap.Context) => void,\n\t\toptions?: SetupOptions\n\t): void {\n\t\tif (!this.activeAnimations.has(key) && !this.contexts.has(key)) {\n\t\t\tconst ctx = gsap.context((self: gsap.Context) => {\n\t\t\t\tsetupFunction(self);\n\t\t\t}, options?.scope);\n\t\t\tthis.contexts.set(key, ctx);\n\n\t\t\tthis.activeAnimations.set(key, [{ kill: () => {} } as gsap.core.Tween]);\n\n\t\t\tif (options?.persist) {\n\t\t\t\tthis.persistentAnimations.add(key);\n\t\t\t\tthis.log(`üîß PERSISTENT setup completed: ${key}`);\n\t\t\t} else {\n\t\t\t\tthis.log(`üîß Setup completed: ${key}`);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.log(`‚ôªÔ∏è Setup already executed: ${key}`);\n\t\t}\n\t}\n\n\t/**\n\t * Crea e registra una Timeline con opzioni GSAP standard.\n\t *\n\t * @param key Chiave univoca della timeline\n\t * @param vars Opzioni della timeline GSAP\n\t * @param options.persist Se true, la timeline √® preservata ai cleanup non forzati\n\t * @returns Istanza di Timeline\n\t */\n\ttimeline(\n\t\tkey: string,\n\t\tvars?: gsap.TimelineVars,\n\t\toptions?: AnimationOptions\n\t): gsap.core.Timeline {\n\t\treturn this.animate(key, gsap.timeline(vars), options);\n\t}\n\n\t/**\n\t * Crea e registra un nuovo ScrollTrigger con la chiave indicata.\n\t *\n\t * @param key Chiave univoca dello ScrollTrigger\n\t * @param vars Configurazione di ScrollTrigger\n\t * @param options.persist Se true, lo ScrollTrigger √® preservato ai cleanup non forzati\n\t * @returns L'istanza creata, o null se esiste gi√† per quella chiave\n\t */\n\tscroll(\n\t\tkey: string,\n\t\tvars: ScrollTrigger.Vars,\n\t\toptions?: AnimationOptions\n\t): ScrollTrigger | null {\n\t\tif (this.scrollTriggers.has(key)) {\n\t\t\tthis.log(`‚ö†Ô∏è ScrollTrigger already exists for: ${key} - skipping`);\n\t\t\treturn null;\n\t\t}\n\n\t\tconst trigger = ScrollTrigger.create(vars);\n\t\tthis.registerScrollTriggers(key, [trigger], options);\n\t\treturn trigger;\n\t}\n\n\t/**\n\t * Helper per killare array di animazioni GSAP\n\t */\n\tprivate killAnimations(animations: (gsap.core.Timeline | gsap.core.Tween)[]): void {\n\t\tif (!animations || animations.length === 0) return;\n\n\t\tconst validAnimations = animations.filter(Boolean) as (\n\t\t\t| gsap.core.Timeline\n\t\t\t| gsap.core.Tween\n\t\t)[];\n\n\t\tif (validAnimations.length === 0) return;\n\n\t\tvalidAnimations.forEach((animation) => {\n\t\t\ttry {\n\t\t\t\tanimation.kill();\n\t\t\t} catch (e) {\n\t\t\t\tif (this.isDebug) {\n\t\t\t\t\tconsole.warn('Failed to kill animation:', e);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Helper per killare array di ScrollTriggers\n\t */\n\tprivate killScrollTriggers(triggers: ScrollTrigger[]): void {\n\t\tif (!triggers || triggers.length === 0) return;\n\t\ttriggers.forEach((trigger) => trigger.kill());\n\t}\n\n\t/**\n\t * Cleanup di una specifica chiave\n\t *\n\t * @param key Chiave da pulire\n\t * @param force Se true, forza la pulizia anche se l'animazione √® persistente\n\t */\n\tcleanup(key: string, force = false): void {\n\t\tif (!force && this.isPersistent(key)) {\n\t\t\tif (this.isDebug) {\n\t\t\t\tthis.log(`üîí Skipping cleanup for persistent animation: ${key}`);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tlet cleanedItems = 0;\n\n\t\tconst ctx = this.contexts.get(key);\n\t\tif (ctx) {\n\t\t\tctx.revert();\n\t\t\tthis.contexts.delete(key);\n\t\t\tcleanedItems++;\n\t\t}\n\n\t\tconst animations = this.activeAnimations.get(key);\n\t\tif (animations) {\n\t\t\tthis.killAnimations(animations);\n\t\t\tthis.activeAnimations.delete(key);\n\t\t\tcleanedItems++;\n\t\t}\n\n\t\tthis.cleanupScrollTriggers(key, force);\n\n\t\tif (force) {\n\t\t\tthis.removePersistence(key);\n\t\t}\n\n\t\tif (this.isDebug && cleanedItems > 0) {\n\t\t\tthis.log(`üßπ Cleaned up: ${key}`);\n\t\t}\n\t}\n\n\t/**\n\t * Cleanup degli ScrollTrigger associati a una chiave\n\t */\n\tprivate cleanupScrollTriggers(key: string, force = false): void {\n\t\tif (!force && this.persistentScrollTriggers.has(key)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst triggers = this.scrollTriggers.get(key);\n\t\tif (triggers) {\n\t\t\tthis.killScrollTriggers(triggers);\n\t\t\tthis.scrollTriggers.delete(key);\n\t\t\tif (this.isDebug) {\n\t\t\t\tthis.log(`üóëÔ∏è Cleaned ScrollTriggers: ${key} (${triggers.length})`);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Cleanup completo di tutte le animazioni non persistenti\n\t */\n\tcleanupAll(): void {\n\t\tif (this.isDebug) {\n\t\t\tthis.trace('cleanupAll() called from:');\n\t\t}\n\n\t\tconst cleanupStats = { contexts: 0, animations: 0, scrollTriggers: 0 };\n\n\t\t// Revert dei context NON persistenti\n\t\tconst ctxKeysToCleanup: string[] = [];\n\t\tfor (const key of this.contexts.keys()) {\n\t\t\tif (!this.persistentAnimations.has(key)) ctxKeysToCleanup.push(key);\n\t\t}\n\t\tfor (const key of ctxKeysToCleanup) {\n\t\t\tconst ctx = this.contexts.get(key);\n\t\t\tctx?.revert();\n\t\t\tthis.contexts.delete(key);\n\t\t\tcleanupStats.contexts++;\n\t\t}\n\n\t\t// Kill animazioni NON persistenti\n\t\tconst animKeysToCleanup: string[] = [];\n\t\tfor (const key of this.activeAnimations.keys()) {\n\t\t\tif (!this.persistentAnimations.has(key)) animKeysToCleanup.push(key);\n\t\t}\n\t\tfor (const key of animKeysToCleanup) {\n\t\t\tconst animations = this.activeAnimations.get(key);\n\t\t\tif (animations) this.killAnimations(animations);\n\t\t\tthis.activeAnimations.delete(key);\n\t\t\tcleanupStats.animations++;\n\t\t}\n\n\t\t// Kill ScrollTrigger NON persistenti\n\t\tconst stKeysToCleanup: string[] = [];\n\t\tfor (const key of this.scrollTriggers.keys()) {\n\t\t\tif (!this.persistentScrollTriggers.has(key)) stKeysToCleanup.push(key);\n\t\t}\n\t\tfor (const key of stKeysToCleanup) {\n\t\t\tconst triggers = this.scrollTriggers.get(key);\n\t\t\tif (triggers) this.killScrollTriggers(triggers);\n\t\t\tthis.scrollTriggers.delete(key);\n\t\t\tcleanupStats.scrollTriggers++;\n\t\t}\n\n\t\t// Cleanup globale ScrollTrigger\n\t\tif (this.persistentScrollTriggers.size > 0) {\n\t\t\tconst persistentSet = new Set<ScrollTrigger>();\n\t\t\tfor (const key of this.persistentScrollTriggers) {\n\t\t\t\tconst triggers = this.scrollTriggers.get(key);\n\t\t\t\ttriggers?.forEach((t) => persistentSet.add(t));\n\t\t\t}\n\t\t\tconst toKill: ScrollTrigger[] = [];\n\t\t\tfor (const t of ScrollTrigger.getAll()) {\n\t\t\t\tif (!persistentSet.has(t)) toKill.push(t);\n\t\t\t}\n\t\t\tif (toKill.length) this.killScrollTriggers(toKill);\n\t\t} else {\n\t\t\tconst all = ScrollTrigger.getAll();\n\t\t\tif (all.length) this.killScrollTriggers(all);\n\t\t}\n\n\t\tif (this.isDebug) {\n\t\t\tthis.log(\n\t\t\t\t`üóëÔ∏è Cleanup completed: ${cleanupStats.contexts} contexts, ${cleanupStats.animations} animations, ${cleanupStats.scrollTriggers} ScrollTriggers cleaned`\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Cleanup forzato: rimuove tutto ignorando la persistenza\n\t */\n\tforceCleanupAll(): void {\n\t\tthis.contexts.forEach((ctx) => ctx.revert());\n\t\tthis.contexts.clear();\n\n\t\tthis.activeAnimations.forEach((animations) => {\n\t\t\tthis.killAnimations(animations);\n\t\t});\n\t\tthis.activeAnimations.clear();\n\n\t\tthis.scrollTriggers.forEach((triggers) => {\n\t\t\tthis.killScrollTriggers(triggers);\n\t\t});\n\t\tthis.scrollTriggers.clear();\n\n\t\tthis.persistentAnimations.clear();\n\t\tthis.persistentScrollTriggers.clear();\n\n\t\tconst allTriggers = ScrollTrigger.getAll();\n\t\tif (allTriggers.length > 0) {\n\t\t\tthis.killScrollTriggers(allTriggers);\n\t\t}\n\n\t\tthis.log('üóëÔ∏è FORCE cleanup - everything destroyed');\n\t}\n\n\t/**\n\t * Rimuovi persistenza da un'animazione specifica\n\t */\n\tremovePersistence(key: string): void {\n\t\tthis.persistentAnimations.delete(key);\n\t\tthis.persistentScrollTriggers.delete(key);\n\t\tthis.log(`üîì Removed persistence for: ${key}`);\n\t}\n\n\t/**\n\t * Verifica se un'animazione √® persistente\n\t */\n\tisPersistent(key: string): boolean {\n\t\treturn this.persistentAnimations.has(key) || this.persistentScrollTriggers.has(key);\n\t}\n\n\t/**\n\t * Aggiorna gli ScrollTrigger\n\t *\n\t * @param keys Chiave singola o array di chiavi da refreshare; se omesso, refresh globale\n\t */\n\trefresh(keys?: string | string[]): void {\n\t\tif (!keys) {\n\t\t\tScrollTrigger.refresh(true);\n\t\t\tthis.log('üîÑ All ScrollTriggers refreshed');\n\t\t\treturn;\n\t\t}\n\n\t\tconst keysToRefresh = Array.isArray(keys) ? keys : [keys];\n\t\tlet refreshedCount = 0;\n\n\t\tkeysToRefresh.forEach((key) => {\n\t\t\tconst triggers = this.scrollTriggers.get(key);\n\t\t\tif (triggers) {\n\t\t\t\ttriggers.forEach((trigger) => trigger.refresh());\n\t\t\t\trefreshedCount++;\n\t\t\t\tthis.log(`üîÑ ScrollTriggers refreshed for: ${key}`);\n\t\t\t} else {\n\t\t\t\tthis.log(`‚ö†Ô∏è No ScrollTriggers found for key: ${key}`);\n\t\t\t}\n\t\t});\n\n\t\tif (refreshedCount > 0) {\n\t\t\tthis.log(`‚úÖ Refreshed ScrollTriggers for ${refreshedCount} key(s)`);\n\t\t}\n\t}\n\n\t/**\n\t * Ottieni informazioni sullo stato corrente\n\t */\n\tgetStatus(): {\n\t\tanimations: number;\n\t\tscrollTriggers: number;\n\t\tpersistent: number;\n\t\tkeys: string[];\n\t\tpersistentKeys: string[];\n\t} {\n\t\tconst totalScrollTriggers = Array.from(this.scrollTriggers.values()).reduce(\n\t\t\t(total, triggers) => total + triggers.length,\n\t\t\t0\n\t\t);\n\n\t\tconst totalPersistent = this.persistentAnimations.size + this.persistentScrollTriggers.size;\n\n\t\treturn {\n\t\t\tanimations: this.activeAnimations.size,\n\t\t\tscrollTriggers: totalScrollTriggers,\n\t\t\tpersistent: totalPersistent,\n\t\t\tkeys: [\n\t\t\t\t...this.activeAnimations.keys(),\n\t\t\t\t...this.scrollTriggers.keys(),\n\t\t\t\t...this.contexts.keys(),\n\t\t\t],\n\t\t\tpersistentKeys: [\n\t\t\t\t...this.persistentAnimations.keys(),\n\t\t\t\t...this.persistentScrollTriggers.keys(),\n\t\t\t],\n\t\t};\n\t}\n\n\t/**\n\t * Verifica se un'animazione √® attiva\n\t */\n\tisActive(key: string): boolean {\n\t\treturn (\n\t\t\tthis.activeAnimations.has(key) || this.scrollTriggers.has(key) || this.contexts.has(key)\n\t\t);\n\t}\n\n\t// Stili per logging console\n\tprivate logIcon = '%c ';\n\tprivate logIconStyle = [\n\t\t`background: url(\"data:image/svg+xml,%3Csvg%20version%3D%221.0%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22400.000000pt%22%20height%3D%22400.000000pt%22%20viewBox%3D%220%200%20400.000000%20400.000000%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%3E%3Cg%20transform%3D%22translate(0.000000%2C400.000000)%20scale(0.100000%2C-0.100000)%22%20fill%3D%22%230ae448%22%20stroke%3D%22none%22%3E%3Cpath%20d%3D%22M853%203945%20c-202%20-36%20-385%20-133%20-533%20-284%20-189%20-194%20-281%20-430%20-274%20-708%205%20-262%2098%20-478%20283%20-664%20150%20-150%20310%20-234%20519%20-272%2063%20-11%2082%20-26%2037%20-28%20-14%20-1%20-28%20-2%20-32%20-3%20-5%20-1%20-26%20-5%20-48%20-10%20-287%20-57%20-567%20-291%20-685%20-573%20-55%20-132%20-73%20-224%20-74%20-378%200%20-283%2092%20-505%20289%20-700%20181%20-179%20399%20-273%20650%20-280%20446%20-12%20823%20248%20964%20667%2027%2081%2047%20178%2042%20206%20-1%206%202%2012%206%2012%205%200%2010%20-12%2011%20-27%207%20-91%2045%20-219%2095%20-318%20103%20-206%20297%20-387%20506%20-471%20213%20-86%20482%20-93%20694%20-18%20146%2053%20258%20124%20373%20239%20126%20126%20218%20293%20260%20473%2019%2078%2025%20259%2013%20352%20-42%20308%20-249%20594%20-534%20737%20-103%2052%20-306%20107%20-350%2094%20-5%20-1%20-6%201%20-2%205%204%204%2014%209%2022%2010%207%201%2032%205%2055%208%20310%2043%20615%20282%20738%20578%2058%20139%2075%20228%2076%20383%200%20154%20-14%20234%20-64%20364%20-87%20226%20-283%20432%20-504%20531%20-143%2064%20-269%2088%20-436%2084%20-298%20-7%20-550%20-134%20-745%20-375%20-92%20-113%20-171%20-295%20-191%20-439%20-3%20-23%20-7%20-48%20-8%20-55%20-1%20-8%20-6%20-18%20-10%20-22%20-4%20-4%20-6%20-3%20-5%202%207%2022%20-13%20129%20-37%20207%20-50%20158%20-124%20280%20-243%20399%20-138%20137%20-285%20218%20-481%20265%20-83%2020%20-284%2025%20-377%209z%20m1199%20-1279%20c93%20-264%20270%20-459%20521%20-576%2084%20-39%20228%20-80%20279%20-80%2043%200%2025%20-16%20-24%20-23%20-197%20-26%20-383%20-121%20-534%20-271%20-157%20-156%20-258%20-357%20-287%20-573%20-5%20-33%20-12%20-36%20-15%20-5%20-20%20257%20-196%20543%20-429%20698%20-115%2076%20-324%20153%20-423%20156%20-17%201%20-33%206%20-37%2011%20-3%206%20-2%207%204%204%2016%20-10%20203%2033%20283%2065%20307%20125%20554%20436%20596%20748%2010%2073%2017%2069%2031%20-15%208%20-44%2023%20-107%2035%20-139z%20m-1102%20-662%20c0%20-8%20-19%20-13%20-24%20-6%20-3%205%201%209%209%209%208%200%2015%20-2%2015%20-3z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E\") no-repeat black center;`,\n\t\t'background-repeat: no-repeat',\n\t\t'background-position: center',\n\t\t'background-size: 12px 12px',\n\t\t'padding: 2px 6px',\n\t\t'border-radius: 2px 0 0 2px',\n\t].join(';');\n\tprivate logTitleStyle = [\n\t\t'background: #424242',\n\t\t'color: white',\n\t\t'padding: 2px 4px',\n\t\t'border-radius: 0 2px 2px 0',\n\t].join(';');\n\tprivate logTitle = '%cAnimationManager';\n\tprivate logResetStyle = '';\n\n\t/**\n\t * Logging con controllo debug\n\t */\n\tpublic log(message: string | string[], groupTitle?: string): void {\n\t\tif (!this.isDebug) return;\n\n\t\tif (Array.isArray(message)) {\n\t\t\tconst title = groupTitle || 'Batch Operation';\n\t\t\tconsole.groupCollapsed(\n\t\t\t\t`${this.logIcon}${this.logTitle}%c ${title}`,\n\t\t\t\tthis.logIconStyle,\n\t\t\t\tthis.logTitleStyle,\n\t\t\t\tthis.logResetStyle\n\t\t\t);\n\t\t\tmessage.forEach((msg) =>\n\t\t\t\tconsole.log(\n\t\t\t\t\t`${this.logIcon}${this.logTitle}%c ${msg}`,\n\t\t\t\t\tthis.logIconStyle,\n\t\t\t\t\tthis.logTitleStyle,\n\t\t\t\t\tthis.logResetStyle\n\t\t\t\t)\n\t\t\t);\n\t\t\tconsole.groupEnd();\n\t\t} else {\n\t\t\tconsole.log(\n\t\t\t\t`${this.logIcon}${this.logTitle}%c ${message}`,\n\t\t\t\tthis.logIconStyle,\n\t\t\t\tthis.logTitleStyle,\n\t\t\t\tthis.logResetStyle\n\t\t\t);\n\t\t}\n\t}\n\n\t/**\n\t * Helper per tracciare chiamate di metodi critici\n\t */\n\tprivate trace(message: string): void {\n\t\tif (!this.isDebug) return;\n\t\tconsole.trace(\n\t\t\t`${this.logIcon}${this.logTitle}%c ${message}`,\n\t\t\tthis.logIconStyle,\n\t\t\tthis.logTitleStyle,\n\t\t\tthis.logResetStyle\n\t\t);\n\t}\n\n\t/**\n\t * Metodo per debugging - mostra stato completo\n\t */\n\tdebug(): void {\n\t\tif (!this.isDebug) return;\n\n\t\tconst status = this.getStatus();\n\t\tconsole.group(\n\t\t\t`${this.logIcon}${this.logTitle}%c Debug Info`,\n\t\t\tthis.logIconStyle,\n\t\t\tthis.logTitleStyle,\n\t\t\tthis.logResetStyle\n\t\t);\n\t\tconsole.log('Active animations:', status.animations);\n\t\tconsole.log('Active ScrollTriggers:', status.scrollTriggers);\n\t\tconsole.log('Registered keys:', status.keys);\n\t\tconsole.log('Animations map:', this.activeAnimations);\n\t\tconsole.log('ScrollTriggers map:', this.scrollTriggers);\n\t\tconsole.groupEnd();\n\t}\n}\n\n// Esporta l'istanza singleton\nexport const AM = AnimationManager.getInstance();\n\n// Esporta anche la classe per chi vuole estenderla\nexport { AnimationManager };\n\n// Esponi globalmente in ambiente browser per debug (solo se window esiste)\nif (typeof window !== 'undefined') {\n\t(window as Window & { AM?: AnimationManager }).AM = AM;\n}\n","import type Swup from 'swup';\nimport type { SPAAdapter } from '../AnimationManager.js';\n\n/**\n * Adapter per integrare AnimationManager con Swup\n *\n * @example\n * import Swup from 'swup';\n * import { AM, createSwupAdapter } from 'gsap-spa-manager';\n *\n * const swup = new Swup();\n * AM.init({ adapter: createSwupAdapter(swup) });\n *\n * // Per disconnettere l'adapter:\n * AM.destroy();\n */\nexport function swupAdapter(swup: Swup): SPAAdapter {\n\t// Flag per tracciare se l'adapter √® stato distrutto\n\tlet isDestroyed = false;\n\n\t// Wrapper che controlla il flag prima di eseguire il callback\n\tconst createGuardedCallback = (callback: () => void) => {\n\t\treturn () => {\n\t\t\tif (!isDestroyed) {\n\t\t\t\tcallback();\n\t\t\t}\n\t\t};\n\t};\n\n\tlet guardedBeforeSwap: (() => void) | null = null;\n\tlet guardedAfterSwap: (() => void) | null = null;\n\n\treturn {\n\t\tname: 'Swup',\n\n\t\tonBeforeSwap(callback: () => void): void {\n\t\t\tguardedBeforeSwap = createGuardedCallback(callback);\n\t\t\tswup.hooks.before('content:replace', guardedBeforeSwap);\n\t\t},\n\n\t\tonAfterSwap(callback: () => void): void {\n\t\t\tguardedAfterSwap = createGuardedCallback(callback);\n\t\t\tswup.hooks.on('content:replace', guardedAfterSwap);\n\t\t},\n\n\t\tdestroy(): void {\n\t\t\t// Imposta il flag per disabilitare i callback\n\t\t\tisDestroyed = true;\n\n\t\t\t// Nota: Swup non fornisce un modo type-safe per rimuovere hook singoli\n\t\t\t// con handler specifici. Usiamo il flag isDestroyed come guardia.\n\t\t\t// Per una pulizia completa, distruggere l'istanza Swup con swup.destroy()\n\n\t\t\tguardedBeforeSwap = null;\n\t\t\tguardedAfterSwap = null;\n\t\t},\n\t};\n}\n","import type { SPAAdapter } from '../AnimationManager.js';\n\n// Tipo minimo per Barba.js per evitare dipendenze hard\ninterface BarbaCore {\n\thooks: {\n\t\tbefore(hook: string, callback: () => void): void;\n\t\tafter(hook: string, callback: () => void): void;\n\t\t// Barba.js non ha un metodo off() nativo per i hooks\n\t};\n}\n\n/**\n * Adapter per integrare AnimationManager con Barba.js\n *\n * @example\n * import barba from '@barba/core';\n * import { AM, createBarbaAdapter } from 'gsap-spa-manager';\n *\n * barba.init();\n * AM.init({ adapter: createBarbaAdapter(barba) });\n *\n * @note Barba.js non supporta la rimozione dinamica degli hooks,\n * quindi destroy() non rimuove i listener ma previene l'esecuzione\n */\nexport function barbaAdapter(barba: BarbaCore): SPAAdapter {\n\t// Flag per disabilitare i callback dopo destroy\n\tlet isDestroyed = false;\n\n\treturn {\n\t\tname: 'Barba.js',\n\n\t\tonBeforeSwap(callback: () => void): void {\n\t\t\tbarba.hooks.before('leave', () => {\n\t\t\t\tif (!isDestroyed) callback();\n\t\t\t});\n\t\t},\n\n\t\tonAfterSwap(callback: () => void): void {\n\t\t\tbarba.hooks.after('enter', () => {\n\t\t\t\tif (!isDestroyed) callback();\n\t\t\t});\n\t\t},\n\n\t\tdestroy(): void {\n\t\t\t// Barba.js non permette di rimuovere hooks,\n\t\t\t// quindi usiamo un flag per disabilitare i callback\n\t\t\tisDestroyed = true;\n\t\t},\n\t};\n}\n","import type { SPAAdapter } from '../AnimationManager.js';\n\n/**\n * Adapter per integrare AnimationManager con Astro View Transitions\n *\n * Astro View Transitions usa eventi DOM nativi invece di un'istanza router,\n * quindi questo adapter non richiede parametri.\n *\n * @example\n * import { AM, createAstroAdapter } from 'gsap-spa-manager';\n *\n * // In un <script> tag o client-side script\n * AM.init({ adapter: createAstroAdapter() });\n *\n * @example\n * // Con opzioni\n * AM.init({\n *   debug: true,\n *   adapter: createAstroAdapter({ refreshDelay: 100 })\n * });\n *\n * @see https://docs.astro.build/en/guides/view-transitions/\n */\nexport interface AstroAdapterOptions {\n\t/**\n\t * Ritardo in ms prima del refresh degli ScrollTrigger dopo lo swap.\n\t * Utile se il nuovo contenuto ha bisogno di tempo per il rendering.\n\t * @default 0\n\t */\n\trefreshDelay?: number;\n}\n\nexport function astroAdapter(options: AstroAdapterOptions = {}): SPAAdapter {\n\tconst { refreshDelay = 0 } = options;\n\n\t// Store dei listener per poterli rimuovere in destroy()\n\tlet beforeSwapHandler: (() => void) | null = null;\n\tlet afterSwapHandler: (() => void) | null = null;\n\n\treturn {\n\t\tname: 'Astro View Transitions',\n\n\t\tonBeforeSwap(callback: () => void): void {\n\t\t\tbeforeSwapHandler = callback;\n\t\t\tdocument.addEventListener('astro:before-swap', beforeSwapHandler);\n\t\t},\n\n\t\tonAfterSwap(callback: () => void): void {\n\t\t\tafterSwapHandler = () => {\n\t\t\t\tif (refreshDelay > 0) {\n\t\t\t\t\tsetTimeout(callback, refreshDelay);\n\t\t\t\t} else {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t\tdocument.addEventListener('astro:after-swap', afterSwapHandler);\n\t\t},\n\n\t\tdestroy(): void {\n\t\t\tif (beforeSwapHandler) {\n\t\t\t\tdocument.removeEventListener('astro:before-swap', beforeSwapHandler);\n\t\t\t\tbeforeSwapHandler = null;\n\t\t\t}\n\t\t\tif (afterSwapHandler) {\n\t\t\t\tdocument.removeEventListener('astro:after-swap', afterSwapHandler);\n\t\t\t\tafterSwapHandler = null;\n\t\t\t}\n\t\t},\n\t};\n}\n"],"mappings":"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","names":["gsap","ScrollTrigger","AnimationManager","_AnimationManager","options","debug","adapter","hasNonPersistentAnimations","key","hasNonPersistentScrollTriggers","hasNonPersistentContexts","animation","animations","triggers","animationFactory","setupFunction","ctx","self","vars","trigger","validAnimations","e","force","cleanedItems","cleanupStats","ctxKeysToCleanup","animKeysToCleanup","stKeysToCleanup","persistentSet","t","toKill","all","allTriggers","keys","keysToRefresh","refreshedCount","totalScrollTriggers","total","totalPersistent","message","groupTitle","title","msg","status","AM","AM","swupAdapter","swup","isDestroyed","createGuardedCallback","callback","guardedBeforeSwap","guardedAfterSwap","barbaAdapter","barba","isDestroyed","callback","astroAdapter","options","refreshDelay","beforeSwapHandler","afterSwapHandler","callback"]}